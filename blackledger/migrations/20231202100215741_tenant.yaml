app: blackledger
ts: 20231202100215741
name: tenant
depends:
- blackledger:20230718035300931_ulid
doc: null
up:
- |-
  CREATE SEQUENCE tenant_id_seq AS smallint CYCLE;
  CREATE TABLE tenant (
    id        uuid            PRIMARY KEY DEFAULT gen_id('tenant_id_seq')
    , name    varchar         NOT NULL UNIQUE
    , created timestamptz(6)  NOT NULL DEFAULT now()
  );

dn:
- |-
  ALTER TABLE entry DROP COLUMN tenant_id;
  ALTER TABLE transaction DROP COLUMN tenant_id;
  ALTER TABLE account DROP CONSTRAINT account_tenant_id_name_key;
  ALTER TABLE account DROP COLUMN tenant_id;

  DROP TABLE tenant;
  DROP SEQUENCE tenant_id_seq;

  ALTER TABLE account ADD UNIQUE (name);
