app: blackledger
ts: 20230718041340046
name: direction
depends:
- sqly:20211105034808482_init
doc: null
up: >-
  CREATE TYPE direction AS ENUM ('DR', 'CR');
  CREATE OR REPLACE FUNCTION account_norm(direction) RETURNS int AS $$
    SELECT CASE WHEN $1 = 'DR' THEN -1 ELSE 1 END;
  $$ LANGUAGE SQL;
  CREATE OR REPLACE FUNCTION transaction_dir(direction) RETURNS int AS $$
    SELECT CASE WHEN $1 = 'DR' THEN 1 ELSE -1 END;
  $$ LANGUAGE SQL;
dn: >-
  DROP FUNCTION account_norm(direction);
  DROP FUNCTION transaction_dir(direction);
  DROP TYPE direction;
